## εισαγωγικό Dockerfile
```dockerfile
# ξεκίνα από image που έχει ήδη Node εγκατεστημένο.
FROM node:20 
# default φάκελο εργασίας μέσα στο container
WORKDIR /usr/src/app
# πρώτο ./index.js → το αρχείο στο PC σου (δίπλα στο Dockerfile), δεύτερο ./index.js → προορισμός ΜΕΣΑ στο container. Επειδή έχω ήδη: WORKDIR /usr/src/app → /usr/src/app/index.js
COPY ./index.js ./index.js
CMD node index.js
```
- λίγο πιο σύνθετο
```dockerfile
FROM node:20
WORKDIR /usr/src/app
COPY --chown=node:node . .
RUN npm ci --omit=dev
ENV DEBUG=playground:*
USER node
CMD npm start
```
το npm ci είναι περίπου ίδιο με το npm install αλλα πιο ασφαλές για docker
έχει και env variable DEBUG (πως έχουμε dev production etc)
το --chown=node:node μπείκε για να μην έχει δικαιοματα administrator (security)

το φτιάχνω με `docker build -t imagename .` (θα μου φτιάξει image)
βλεπω τα image με `docker image ls -a` 
το τρέχω με `docker run imagename -it bash` (θα μου φτιάξει container)
βλέπω τα container με `docker container ls -a`

αν χρειάζομαι να εξαγάγω port απο το container:
  `docker run -p 3123:3000 express-server`
  host-port:application-port

## βασικό .dockerignore
```dockerfile
.dockerignore
.gitignore
node_modules
Dockerfile
```

## Βασικό docker-compose.yml
```yml
services:
  app:                    # The name of the service, can be anything
    image: express-server # Declares which image to use
    build: .              # Declares where to build if image is not found
    ports:                # Declares the ports to publish
      - 3000:3000
```
το κάνω `build με docker compose up` η με `docker compose up --build` αν είναι rebuild
και κλείνει με `docker compose down`
αυτό είναι ισοδύναμο με το `docker build -t imagename . ` και `docker run -p 3000:3000 express-server`

### παράδειγμα χρήσης mongoDB
```yml
services:
  mongo:
    image: mongo
    ports:
      - 3456:27017
    environment:
      MONGO_INITDB_ROOT_USERNAME: root
      MONGO_INITDB_ROOT_PASSWORD: example
      MONGO_INITDB_DATABASE: the_database
    volumes: 
      - ./mongo/mongo-init.js:/docker-entrypoint-initdb.d/mongo-init.js
```
το volumes είναι για να δέσουμε ένα αρχείο του container με ένα αρχείο εκτός. Εδώ δένουμε το ./mongo/mongo-init.js με το /docker-entrypoint-initdb.d/mongo-init.js. Οπότε ότι αλλαγές κάνουμε στο ένα θα φαίνονται και στο άλλο. Με volumes: Δεν χρειάζεται rebuild.

τρέχει με `docker compose -f docker-compose.dev.yml up` οπου με -f του λέω πιο αρχείο να κάνει build
με `docker compose -f docker-compose.dev.yml up -d` τρέχει στο background και με `docker compose -f docker-compose.dev.yml logs -f` βλέπω τα logs του. `docker compose -f docker-compose.dev.yml logs --tail=50 -f` για μόνο τα τελευταία